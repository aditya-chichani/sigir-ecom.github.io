  <!DOCTYPE html>
<html lang="en">

    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-115771746-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-115771746-1');
        </script>

        <script src="https://www.google.com/recaptcha/api.js" async defer></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>SIGIR eCom</title>

        <!-- Bootstrap core CSS -->
        <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom fonts for this template -->
        <link href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Lato:100,100i,300,300i,400,400i,700,700i,900,900i" rel="stylesheet">

        <!-- Custom styles for this template -->
        <link href="css/one-page-wonder.min.css" rel="stylesheet">

    </head>
    <script>
        var ENDPOINT_URL = 'https://glsipr46be.execute-api.us-west-2.amazonaws.com/dev/leaderboard';
        var TABLE_INFO = [  {'task':'rec_all', 'tableBodyId':'recAllTableBody', 'tableId':'recAllTable', 'metric_name':'F1'},
                            {'task':'rec_next', 'tableBodyId':'recNextTableBody','tableId':'recNextTable', 'metric_name':'MRR'},
                            {'task':'cart', 'tableBodyId':'cartTableBody', 'tableId':'cartTable', 'metric_name':'Weighted F1'}  ]
        var url = new URL(window.location.href)
        var url_params = new URLSearchParams(url.search)
        function initLeaderboardTable(tableInfo){
            var htmlBody = ' <table class="cardTable">\
                                <thead>\
                                    <th>  Position </th>\
                                    <th> Nickname </th>\
                                    <th> Score ('+tableInfo['metric_name']+') </th>\
                                    <th> Timestamp </th>\
                                </thead>\
                                <tbody id='+tableInfo['tableBodyId']+'>\
                                </tbody>\
                            </table>'
            console.log(htmlBody)
            $('#' + tableInfo['tableId']).html(htmlBody);
        }


        // function to build rows for the submissions in a given table body
        function buildLeaderboardTable(data, targetTable) {
            var htmlBody = '';
            var rows = data.data;
            for(var i = 0; i < rows.length; i++) {
                // start row
                htmlBody += '<tr>';
                htmlBody += '<td>' + rows[i]['#'] + '</td>';
                htmlBody += '<td>' + rows[i]['info']['nickname'] + '</td>';
                htmlBody += '<td>' + rows[i]['score'] + '</td>';
                htmlBody += '<td>' + rows[i]['info']['submission_time'] + '</td>';
                // end row
                htmlBody += '</tr>';
            }
            if(rows.length > 0) {
                // finally, fill the table
                $('#' + targetTable).html(htmlBody);
            }
        }

        function sign_up_success(){
            alert("Sign-Up Successful!");
        }
        function sign_up_failure(){
            alert("Sign-Up Unsuccessful!");
        }

        function check_success(params) {
            if (params.has('success') && params.get('success') === 'True') {
                sign_up_success();
            } else if (params.has('success') && params.get('success') === 'False') {
                sign_up_failure();
            }
        }

        // on page load, call the endpoint
        $(document).ready(function() {
            check_success(url_params)
            // generate tables
            TABLE_INFO.forEach(initLeaderboardTable)
            // put info into tables
            TABLE_INFO.forEach( tableInfo =>
                $.get(ENDPOINT_URL, {limit: 10, task: tableInfo['task'], stage:1})
                    // when done
                    .done(function (data) {
                        console.log("Data Loaded: " + JSON.stringify(data));
                        buildLeaderboardTable(data,tableInfo['tableBodyId']);
                    }) // when something happens
                    .fail(function (data) {
                        alert("ERROR WHEN CALLING THE LEADERBOARD ENDPOINT");
                    })
            );
        });

        // captcha
        function enableBtn(){
           document.getElementById("signBtn").disabled = false;
         }

        // trick from: https://artisansweb.net/validate-google-recaptcha-using-javascript/
        function submitUserForm() {
            var response = grecaptcha.getResponse();
            if(response.length == 0) {
                alert("CAPTCHA ERROR!");
                return false;
            }
            return true;
        }
    </script>

    <!--  custom internal styles -->
    <style>
        input[type=text] {
          width: 200px;
          padding: 10px 10px;
          margin: 5px 0;
          box-sizing: border-box;
          border: 2px solid royalblue;
          border-radius: 5px;

        }
        .submitBtn {
            background-color: lightgray;
            border-radius: 5px;
            padding: 10px;
        }
        #leaderboardContainer, #signupContainer {
            margin-top: 20px;
            margin-bottom: 20px;
        }
        /* Table style: from https://dev.to/dcodeyt/creating-beautiful-html-tables-with-css-428l */
        .cardTable {
            font-size: smaller;
            border-collapse: collapse;
            margin: 25px 0;
            min-width: 400px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
        }
        .cardTable thead tr {
            background-color: royalblue;
            color: #ffffff;
            text-align: left;
        }
        .cardTable th,  .cardTable td {
            padding: 12px 15px;
        }
        .cardTable tbody tr {
            border-bottom: 1px solid #dddddd;
        }
        .cardTable tbody tr:nth-of-type(even) {
            background-color: #f3f3f3;
        }
        .cardTable tbody tr:last-of-type {
            border-bottom: 2px solid royalblue;
        }
    </style>

  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top">
      <div class="container">
        <a class="navbar-brand" href="./index.html">SIGIR eCom'20</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive" data-target=".navbar-collapse" data-toggle="collapse">
          <ul class="navbar-nav ml-auto" >
            <li class="nav-item">
              <a class="nav-link" href="./index.html">Home</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="./program.html">Program</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="./accepted-papers.html">Accepted Papers</font></a>
            </li>


            <li class="nav-item">
              <a class="nav-link" href="./data-task.html"><font color=#FFCB05>Data Challenge</font></a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="./organizers.html">Organizers</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./cfp.html">CFP</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="http://sigir-ecom.weebly.com/" target="_blank"><font color=#ff3377>eCom'17</font></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./ecom2018/index.html" target="_blank"><font color=#3377ff>eCom'18</font></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./ecom2019/index.html" target="_blank"><font color=#FFCB05>eCom'19</font></a>
            </li>

            <li>
                      <a href="https://twitter.com/SIGIReCom" target="_blank">
                      <img src="./img/Twitter_Social_Icon_Circle_White.png" style="width:25px;height:25px;" > </a>
                    </li>
          </ul>
        </div>
      </div>
    </nav>
    <header class="masthead text-center text-white">
      <div class="masthead-content">
        <div class="container">
          <h2 class="masthead-heading mb-0"><font color=black>Coveo Data Challenge</font></h2>
          <br>
          <h4 class="masthead-subheading mb-0"><font face="Zapfino" color=black><b> - </b></font></h4>
          <!--a href="#" class="btn btn-primary btn-xl rounded-pill mt-5">Learn More</a-->

        </div>
      </div>
    </header>

<section>
<div class="container">
    <div class="p-0">
        <div class="alert" color=de2910ff>
            <br>
            <p>&nbsp;&nbsp;&nbsp;&nbsp;<font size="3"><b><a href="" target="_blank">Click here for the data challenge overview paper</a></b></font><p>
            <p>&nbsp;&nbsp;&nbsp;&nbsp;<font size="3"><b><a href="#leaderboardContainer">Click here for the Leaderboards</a></b></font><p>
            <p>&nbsp;&nbsp;&nbsp;&nbsp;<font size="3"><b>Join the data challenge slack channel: <a href="https://join.slack.com/t/ecom-ir/shared_invite/zt-4ifyh2rk-y6ZCUJi_rymJxmwiuKMtkw" target="_blank">DC Slack</a></b></font></p>
        </div>
    </div>
</div>
<div class="container">
    <div class="p-0">
        <div id="overview">
            <br>
            <p>
                Welcome to the Data Challenge leaderboard page
                for the <a target="_blank" href="https://sigir-ecom.github.io/">2021 SIGIR Workshop on eCommerce</a>!
                Training data, evaluation scripts and rules can be found in the
                <a target="_blank" href="https://github.com/coveooss/SIGIR-ecom-data-challenge">official challenge repository</a>;
                relevant literature and background information about the challenge and relevant industry use cases can
                be found in the challenge paper pre-print (coming soon!).
            </p>
            <font size="5"><b>How to participate</b></font>
            <p>
                To participate, you just have to i) sign up (below) and ii) make a submission for one of the two tasks in the
                challenge (or both). Please note that participation in the challenge implies acceptance of the
                <a target="_blank" href="https://github.com/coveooss/SIGIR-ecom-data-challenge">Terms and Conditions</a>.
            </p>
            <font size="5"><b>Contacts</b></font>
            <p>
                If you have problems with the sign-up, questions about your submission or general inquiry about the
                challenge, please join the Data Challenge Slack or
                drop us a <a href="mailto:sigirdatachallenge2021@gmail.com">message</a>.
            </p>
            <div align="center">
               <a target="_blank" style="text-decoration:none;" href="https://github.com/coveooss/SIGIR-ecom-data-challenge">
                   <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" width="50">
               </a>
                <a target="_blank" style="text-decoration:none;" href="https://www.coveo.com/en">
                   <img src="https://yt3.ggpht.com/ytc/AAUvwnjihqbA7UO3v8XDdhQ_kIB5iAKGkVe4b0ZtwxKalQ=s900-c-k-c0x00ffffff-no-rj" width="50">
               </a>
                 <a target="_blank" style="text-decoration:none;" href="https://sigir-ecom.github.io/">
                   <img src="https://sigir.org/sigir2021/wp-content/uploads/2021/03/cropped-imageedit_6_5373847278-300x135.png" height="50">
               </a>
                 <a target="_blank" style="text-decoration:none;" href="https://twitter.com/SIGIReCom">
                   <img src="https://logodownload.org/wp-content/uploads/2014/09/twitter-logo-1-1.png" width="50">
               </a>

            </div>
        </div> <!-- end of overview -->
        <br>
        <div id="signupContainer">
            <font size="5"><b>Sign-up</b></font>
            <p>
                To sign up for the challenge, you should fill the form below with your official e-mail, your organization
                (university or company), first and last name of the team lead and a nickname for the leaderboard.
                You will receive a confirmation e-mail from the system including your user id and AWS write-only credentials
                to upload your json files to the challenge bucket - please use the information responsibly. After
                submitting the form, you will be sent back to this page: please <b>wait some minutes and re-check your e-mail,
                <em>including your spam folder</em></b> before re-submitting. We suggest adding <em>sigirdatachallenge2021@gmail.com</em>
                to your list of trusted senders.
            </p>
            <p>
                This web-app is hosted on a devoted AWS account and all data will be destroyed at the end of the Data Challenge:
                if you want to use the same serverless back-end to run a lightweight leaderboard website, please get in touch.
            </p>
            <p>
                For the submission format and the general rules of the contest,
                please consult the relevant section in the
                <a target="_blank" href="https://github.com/coveooss/SIGIR-ecom-data-challenge">README</a>;
                if you want a ready-made script to upload your submission, check the one provided in the
                <a target="_blank" href="https://github.com/coveooss/SIGIR-ecom-data-challenge">repository</a>.
            </p>
            <div align="center">
                <form action="https://glsipr46be.execute-api.us-west-2.amazonaws.com/dev/signup" method="POST" onsubmit="return submitUserForm();">
                    <table>
                        <tr>
                            <td align="right"><label for="fname">First Name</label></td>
                            <td align="left"><input type="text" id="fname" name="fname" placeholder="Tony"></td>
                        </tr>
                        <tr>
                            <td align="right"> <label for="lname">Last Name</label></td>
                            <td align="left"> <input type="text" id="lname" name="lname" placeholder="Stark"></td>
                        </tr>
                        <tr>
                            <td align="right"><label for="nickname">Nickname</label></td>
                            <td align="left"><input type="text" id="nickname" name="nickname" placeholder="Ironman"></td>
                        </tr>
                        <tr>
                            <td align="right"><label for="email">E-mail</label></td>
                            <td align="left"><input type="text" id="email" name="email" placeholder="tony@starkindustries.com"></td>
                        </tr>
                        <tr>
                            <td align="right"><label for="organization">Organization</label></td>
                            <td align="left"><input type="text" id="organization" name="organization" placeholder="Stark Industries"></td>
                        </tr>
                    </table>
                  <div class="g-recaptcha" data-sitekey="6LeFT5QaAAAAAH1HoAo-eRk_lmy6L3OjI1nsO3FT" data-callback="enableBtn"></div><br />
                  <input type="submit" value="Submit" id="signBtn" disabled="disabled" class="submitBtn">
                </form>
            </div>
        </div> <!-- end of sign up -->
        <br>
        <div id="systemDescContainer">
            <font size="5"><b>System Description Paper</b></font>
            <p>
                System description papers will be peer reviewed (single-blind) by the program committee. All submissions must be formatted according to the latest <a href="http://www.acm.org/publications/proceedings-template">ACM SIG proceedings template</a>.
                More details coming soon!
            </p>
        </div> <!-- end of system desc section -->
        <br>
        <div id="timelineContainer">
          <font size="5"><b>Timeline</b></font>
          <table class="table table-condensed" style="width:90%">
              <tr>
                  <td>April 20</td>
                  <td>Registration Opens, Evaluation Stage 1 Starts!</td>
              </tr>
              <tr>
                  <td>July 15</td>
                  <td>Leaderboard for Stage 1 Closes (Registration closes)</td>
              </tr>
              <tr>
                  <td>July 15</td>
                  <td>Evaluation Stage 2 Starts</td>
              </tr>
              <tr>
                  <td>July 23</td>
                  <td>Evaluation Stage 2 Closes (Final Leaderboard)</td>
              </tr>
              <tr>
                  <td>July 30</td>
                  <td>eCom Full Day Workshop</td>
              </tr>
          </table>
        </div> <!-- end of system desc section -->
        <br>
        <div id="leaderboardContainer">
            <div class="taskContainer">
                <font size="5"><b>Next Item Prediction Leaderboard</b></font>
                <div class="boardContainer" id="recNextTable"></div>
                <br>
                <font size="5"><b>Subsequent Items Prediction Leaderboard</b></font>
                <div class="boardContainer" id="recAllTable"></div>
                <br>
                <font size="5"><b>Purchase Intent Prediction Leaderboard</b></font>
                <div class="boardContainer" id="cartTable"></div>
                <br>
            </div> <!-- end of task container -->
        </div> <!-- end of leaderboards -->


    </div>
</div>
</section>

 <!-- Footer -->
<footer class="py-5 bg-black">
  <div class="container">
    <p class="m-0 text-center small"><a href="https://twitter.com/SIGIReCom" target="_blank" class="btn btn-primary btn-sl rounded-pill"><font color=#00274C>Follow us: @SIGIReCom<font></a></p>
    <p class="m-0 text-center small"><font color=#FFCB05>Please direct all your queries to surya@ksu.edu for help.</font></p>
  </div>
  <!-- /.container -->
</footer>

<!-- Bootstrap core JavaScript -->
<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

</body>

</html>
